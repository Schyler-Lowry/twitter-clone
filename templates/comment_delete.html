{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% load helper_tags %}

{% block title %}
    Comment - Delete
{% endblock title %}



{% block content %}

<div class="col">
    <div class="text rounded-pill bg-info p-2">
        <a href="{% url "user_profile" comment.twit.author.pk %}"><img src="{% get_avatar_url email=comment.twit.author.email size=50 %}" class="rounded-circle" alt="user image"></a>
        <a href="{% url "user_profile" comment.twit.author.pk %}"><span class="fs-4 fw-bold">{{ comment.twit.author }}</span></a>
            <span class="text-muted">| {{ comment.twit.created|timesince }} ago</span>
            
                {% if comment.twit.author == user %}
                    <a href="{% url "twit_edit" comment.twit.pk %}"><span class="badge rounded-pill bg-primary"><i class="bi bi-pencil"></i> Edit</span></a>
                    <a href="{% url "twit_delete" comment.twit.pk %}"><span class="badge rounded-pill bg-danger"><i class="bi bi-trash"></i> Delete</span></a>
                {% endif %}
    </div>
            <br>
            
                <p style="white-space: pre-line">{{ object.body }}</p>
                
        {% if comment.twit.image_url|length > 1 %}
            <div class="w-50">
                <img src="{{ comment.twit.image_url }}" class="img-fluid" alt="">
            </div>
        {% endif %}
            {% if comment.twit.updated != comment.twit.created %}
                <p class="fst-italic">Updated {{ comment.twit.updated|timesince }} ago</p>
            {% else %}
                <p></p>
            {% endif %}
        <p>
            {% with user_likes=twit.likes.all %}
                <button
                data-id="{{ comment.twit.id }}"
                data-action="{% if user in user_likes %}un{% endif %}like"
                data-like-url="{{ comment.twit.get_like_url }}"
                class="like_button btn btn-{% if user not in user_likes %}outline-{% endif %}primary"
                >
                    <i class="like_icon bi-hand-thumbs-up{% if user in user_likes %}-fill{% endif %}"></i>
                    <span class="like_count">{{ user_likes|length }}</span>
                    Likes
                </button>
            {% endwith %}
        </p> 
</div>
<hr>

<h4>Are you sure you want to delete this comment?</h4>
   
            <div class="card w-50">
            <div class="card-body">
                <div class="overflow-auto bg-light"
                style="max-height: 400px;">
                    
                    <p>
                        <a href="{% url "user_profile" comment.author.pk %}"><img src="{% get_avatar_url email=comment.author.email size=25 %}" class="rounded-circle" alt="user image"></a>
                        <span class="fw-semibold"><a href="{% url "user_profile" comment.author.pk %}">{{ comment.author }}</a> &middot; </span> 
                         
                        {{ comment.created|timesince }} ago
                        
                        {% if comment.author == user %}
                         | <a href="{% url "comment_edit" comment.twit.pk comment.pk %}"><span class="badge rounded-pill bg-primary"><i class="bi bi-pencil"></i> Edit</span></a>
                         
                         {% endif %}
                    </p>
                    <p style="white-space: pre-line">{{ comment.body }}</p>
                    <hr>
                    
                </div>
    
            </div>
        <div class="card-body">
            
            <form action="" method="POST">
                {% csrf_token %}
                <button class="btn btn-danger ml-2" type="submit">Delete</button>
                <a href="{% url 'twit_detail' comment.twit.pk %}" id="cancel" name="cancel" class="btn btn-success ml-2">Cancel</a>
            </form>
        </div>
        
</div>
<br>
{% endblock content %}